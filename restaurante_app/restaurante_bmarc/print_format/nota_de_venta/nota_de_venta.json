{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-05-26 23:44:03.189685",
 "css": " @media print {\r\n      body {\r\n        font-family: 'Courier New', monospace;\r\n        font-size: 12px;\r\n        width: 72mm;\r\n        margin: 0;\r\n        padding: 0;\r\n      }\r\n\r\n      h2, p, h4 {\r\n        margin: 2px 0;\r\n        padding: 0;\r\n          font-size: 10px;\r\n      }\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 10px;\r\n}\r\n\r\nth, td {\r\n  text-align: left;\r\n  padding: 2px 0;       /* Reducido */\r\n  line-height: 1.2;     /* M\u00e1s compacto */\r\n}\r\n\r\nth {\r\n  font-weight: bold;\r\n  border-bottom: 1px solid black;\r\n}\r\n\r\n\r\n      .centrado {\r\n        text-align: center;\r\n      }\r\n\r\n      .totales {\r\n        text-align: right;\r\n        font-weight: bold;\r\n        margin-top: 10px;\r\n      }\r\n\r\n      hr {\r\n        border: none;\r\n        border-top: 1px dashed #000;\r\n        margin: 6px 0;\r\n      }\r\n\r\n      .firma {\r\n        text-align: center;\r\n        font-size: 10px;\r\n        margin-top: 20px;\r\n      }\r\n\r\n      .page-break {\r\n        page-break-after: always;\r\n      }\r\n    }\r\n\r\n    body {\r\n      font-family: 'Courier New', monospace;\r\n      font-size: 12px;\r\n      max-width: 72mm;\r\n      margin: auto;\r\n      color: black;\r\n    }",
 "custom_format": 1,
 "default_print_language": "es-EC",
 "disabled": 0,
 "doc_type": "orders",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{# ------------------ NOTA DE VENTA / FACTURA ------------------ #}\r\n\r\n{# Usa la compa\u00f1\u00eda del documento (m\u00e1s preciso que tomar la primera) #}\r\n{% set company = frappe.get_doc(\"Company\", doc.company_id) %}\r\n\r\n{% if company.logo %}\r\n  <div style=\"text-align: center; margin-bottom: 10px;\">\r\n    <img src=\"{{ company.logo }}\" alt=\"Logo\" style=\"height: 80px;\">\r\n  </div>\r\n{% endif %}\r\n\r\n{% if doc.tipo_comprobante == \"1\" %}\r\n  <h2 class=\"centrado\">FACTURA</h2>\r\n{% else %}\r\n  <h2 class=\"centrado\">NOTA DE VENTA</h2>\r\n{% endif %}\r\n\r\n{% if doc.estado == \"Factura\" %}\r\n  <div style=\"font-size: 10px; line-height: 1.4;\">\r\n    <p><strong>RUC Emisor:</strong> {{ company.ruc or 'N/A' }}</p>\r\n    <p><strong>Direcci\u00f3n:</strong> {{ company.address or 'N/A' }}</p>\r\n    <p><strong>Factura:</strong> {{ doc.estab }}-{{ doc.ptoemi }}-{{ doc.secuencial }}</p>\r\n    <p><span style=\"word-break: break-word;\">{{ doc.clave_acceso }}</span></p>\r\n    <p><strong>F. Autorizaci\u00f3n:</strong> {{ doc.fecha_autorizacion or '' }}</p>\r\n  </div>\r\n{% endif %}\r\n\r\n<div style=\"font-size: 10px; line-height: 1.4;\">\r\n  <p><strong>Fec. Emisi\u00f3n:</strong> {{ doc.creation }}</p>\r\n\r\n  {% set cliente = frappe.get_doc(\"Cliente\", doc.customer) %}\r\n  <hr>\r\n  <p><strong>Cliente:</strong> {{ cliente.nombre }}</p>\r\n  <p><strong>Identificaci\u00f3n:</strong> {{ cliente.num_identificacion }}</p>\r\n  <p><strong>Correo:</strong> {{ cliente.correo }}</p>\r\n  <p><strong>Tel\u00e9fono:</strong> {{ cliente.telefono }}</p>\r\n  <p><strong>Direcci\u00f3n:</strong> {{ cliente.direccion }}</p>\r\n  {% if doc.alias %}\r\n    <p class=\"centrado\"><strong>Alias:</strong> {{ doc.alias }}</p>\r\n  {% endif %}\r\n  <p class=\"centrado\"><strong>Orden:</strong> {{ doc.name }}</p>\r\n</div>\r\n\r\n<hr>\r\n\r\n{# =======================\r\n   ACUMULADORES POR TASA\r\n   ======================= #}\r\n{% set ns = namespace(\r\n  base0=0.0, base5=0.0, base12=0.0, base13=0.0, base14=0.0, base15=0.0,\r\n  iva0=0.0,  iva5=0.0,  iva12=0.0,  iva13=0.0,  iva14=0.0,  iva15=0.0,\r\n  subtotal=0.0, ivatotal=0.0\r\n) %}\r\n\r\n<table>\r\n  <thead>\r\n    <tr>\r\n      <th>Producto</th>\r\n      <th style=\"text-align: center;\">Cant</th>\r\n      <th style=\"text-align: right;\">Precio</th>\r\n      <th style=\"text-align: right;\">Total</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {% for item in doc.items %}\r\n      {# Lee el % de IVA del DocType 'taxes' referenciado por item.tax #}\r\n      {% set tax_value = (frappe.db.get_value('taxes', item.tax, 'value') or 0) | float %}\r\n      {# Base de l\u00ednea sin IVA: usa item.total si ya es el subtotal; si no, qty*rate #}\r\n      {% set base = (item.total if item.total is not none else (item.qty * item.rate)) | float %}\r\n      {% set iva_line = (base * tax_value / 100.0) | float %}\r\n\r\n      {# Acumuladores globales #}\r\n      {% set ns.subtotal = ns.subtotal + base %}\r\n      {% set ns.ivatotal = ns.ivatotal + iva_line %}\r\n\r\n      {% if tax_value|int == 0 %}\r\n        {% set ns.base0 = ns.base0 + base %}{% set ns.iva0 = ns.iva0 + iva_line %}\r\n      {% elif tax_value|int == 5 %}\r\n        {% set ns.base5 = ns.base5 + base %}{% set ns.iva5 = ns.iva5 + iva_line %}\r\n      {% elif tax_value|int == 12 %}\r\n        {% set ns.base12 = ns.base12 + base %}{% set ns.iva12 = ns.iva12 + iva_line %}\r\n      {% elif tax_value|int == 13 %}\r\n        {% set ns.base13 = ns.base13 + base %}{% set ns.iva13 = ns.iva13 + iva_line %}\r\n      {% elif tax_value|int == 14 %}\r\n        {% set ns.base14 = ns.base14 + base %}{% set ns.iva14 = ns.iva14 + iva_line %}\r\n      {% elif tax_value|int == 15 %}\r\n        {% set ns.base15 = ns.base15 + base %}{% set ns.iva15 = ns.iva15 + iva_line %}\r\n      {% endif %}\r\n\r\n      {% set producto = frappe.get_doc(\"Producto\", item.product) %}\r\n      <tr>\r\n        <td>{{ producto.nombre }}</td>\r\n        <td style=\"text-align: center;\">{{ item.qty }}</td>\r\n        <td style=\"text-align: right;\">${{ \"{:,.2f}\".format(item.rate or 0) }}</td>\r\n        <td style=\"text-align: right;\">${{ \"{:,.2f}\".format(base) }}</td>\r\n      </tr>\r\n    {% endfor %}\r\n  </tbody>\r\n</table>\r\n\r\n<hr>\r\n\r\n{# ========== TOTALES (derivados de los acumulados) ========== #}\r\n{# Si quieres mostrar tambi\u00e9n cada tasa por separado, a\u00f1ade filas condicionales #}\r\n\r\n{% if ns.base15 > 0 %}\r\n  <p class=\"totales\">Subtotal 15%: ${{ \"{:,.2f}\".format(ns.base15) }}</p>\r\n{% endif %}\r\n{% if ns.base14 > 0 %}\r\n  <p class=\"totales\">Subtotal 14%: ${{ \"{:,.2f}\".format(ns.base14) }}</p>\r\n{% endif %}\r\n{% if ns.base13 > 0 %}\r\n  <p class=\"totales\">Subtotal 13%: ${{ \"{:,.2f}\".format(ns.base13) }}</p>\r\n{% endif %}\r\n{% if ns.base12 > 0 %}\r\n  <p class=\"totales\">Subtotal 12%: ${{ \"{:,.2f}\".format(ns.base12) }}</p>\r\n{% endif %}\r\n{% if ns.base5 > 0 %}\r\n  <p class=\"totales\">Subtotal 5%: ${{ \"{:,.2f}\".format(ns.base5) }}</p>\r\n{% endif %}\r\n{% if ns.base0 > 0 %}\r\n  <p class=\"totales\">Subtotal 0%: ${{ \"{:,.2f}\".format(ns.base0) }}</p>\r\n{% endif %}\r\n\r\n<p class=\"totales\">Subtotal: ${{ \"{:,.2f}\".format(ns.subtotal) }}</p>\r\n<p class=\"totales\">IVA: ${{ \"{:,.2f}\".format(ns.ivatotal) }}</p>\r\n<p class=\"totales\"><strong>Total: ${{ \"{:,.2f}\".format(ns.subtotal + ns.ivatotal) }}</strong></p>\r\n\r\n{# Si prefieres mantener doc.subtotal/doc.iva/doc.total, puedes mostrarlos debajo para control:\r\n<p class=\"totales\" style=\"opacity: .6\">[Sistema] Subtotal: ${{ \"{:,.2f}\".format(doc.subtotal or 0) }}</p>\r\n<p class=\"totales\" style=\"opacity: .6\">[Sistema] IVA: ${{ \"{:,.2f}\".format(doc.iva or 0) }}</p>\r\n<p class=\"totales\" style=\"opacity: .6\">[Sistema] Total: ${{ \"{:,.2f}\".format(doc.total or 0) }}</p>\r\n#}\r\n\r\n<div class=\"firma\">Gracias por su compra</div>\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-08-14 00:14:13.214504",
 "modified_by": "Administrator",
 "module": "Restaurante BMARC",
 "name": "Nota de Venta",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}