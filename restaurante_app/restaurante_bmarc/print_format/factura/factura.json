{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-06-23 23:32:28.207992",
 "css": "",
 "custom_format": 1,
 "default_print_language": "es-EC",
 "disabled": 0,
 "doc_type": "orders",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{% set _ctx = doc.get_context() %}\r\n{% set customer = frappe.get_doc(\"Cliente\", doc.customer) if doc.customer and frappe.db.exists(\"Cliente\", doc.customer) else None %}\r\n\r\n{% macro money(n) %}{{ \"{:,.2f}\".format((n or 0) | float) }}{% endmacro %}\r\n\r\n<style>\r\n  @page {\r\n    size: A4;\r\n    margin: 1.3cm;\r\n  }\r\n  @font-face {\r\n    font-family: \"Code128\";\r\n    src: url('{{ frappe.utils.get_url() }}/assets/restaurante_app/fonts/code128.ttf') format(\"truetype\");\r\n  }\r\n  .t { border: 1px solid #d9d9d9; padding: 6px; }\r\n  .small { font-size: 10px; }\r\n  .right { text-align: right; }\r\n  .center { text-align: center; }\r\n</style>\r\n\r\n{% set ns = namespace(\r\n  base0=0.0, base5=0.0, base12=0.0, base13=0.0, base14=0.0, base15=0.0,\r\n  iva0=0.0, iva5=0.0, iva12=0.0, iva13=0.0, iva14=0.0, iva15=0.0,\r\n  subtotal=0.0, ivatotal=0.0\r\n) %}\r\n\r\n<div style=\"overflow:hidden; margin-bottom:14px;\">\r\n  <div style=\"width:48%; float:left;\">\r\n    {% if doc.company_logo %}\r\n      <img src=\"{{ doc.company_logo }}\" style=\"max-height:70px; margin-bottom:8px;\"><br>\r\n    {% endif %}\r\n    <div class=\"small\">\r\n      <strong>{{ doc.company_name }}</strong><br>\r\n      {{ doc.company_address }}<br>\r\n      Tel: {{ doc.company_phone }}<br>\r\n      Email: {{ doc.company_email }}<br>\r\n      Contribuyente Especial Nro: {{ doc.company_contribuyente or \"N/A\" }}<br>\r\n      Obligado a llevar contabilidad: {{ doc.company_contabilidad or \"NO\" }}\r\n    </div>\r\n  </div>\r\n\r\n  <div style=\"width:48%; float:right; border:1px solid #000; padding:10px; background:#f7f7f7;\">\r\n    <div class=\"center\"><strong>FACTURA</strong></div>\r\n    <div class=\"small center\"><strong>R.U.C.:</strong> {{ doc.company_ruc }}</div>\r\n    <div class=\"small center\" style=\"margin-top:4px;\">\r\n      <strong>No.:</strong> {{ (doc.estab or \"\").zfill(3) }}-{{ (doc.ptoemi or \"\").zfill(3) }}-{{ (doc.secuencial or \"\").zfill(9) }}\r\n    </div>\r\n\r\n    {% if doc.access_key %}\r\n      <div class=\"small\" style=\"margin-top:8px;\"><strong>No. de Autorizaci\u00f3n:</strong></div>\r\n      <div class=\"small\" style=\"word-break:break-all;\">{{ doc.access_key }}</div>\r\n\r\n      <div class=\"small\" style=\"margin-top:6px;\"><strong>CLAVE DE ACCESO</strong></div>\r\n      <div style=\"font-family:'Code128'; font-size:28px; line-height:1; margin-top:6px; white-space:nowrap; overflow:hidden;\">\r\n        {{ doc.access_key }}\r\n      </div>\r\n      <div class=\"small center\" style=\"margin-top:2px;\">{{ doc.access_key }}</div>\r\n    {% endif %}\r\n\r\n    <div class=\"small\" style=\"margin-top:6px;\">\r\n      <strong>Fecha y hora de Autorizaci\u00f3n:</strong> {{ doc.authorization_datetime or \"\" }}\r\n    </div>\r\n    <div class=\"small\"><strong>Ambiente:</strong> {{ doc.environment or \"N/A\" }}</div>\r\n    <div class=\"small\"><strong>Emisi\u00f3n:</strong> NORMAL</div>\r\n  </div>\r\n</div>\r\n\r\n<table style=\"width:100%; border-collapse:collapse; font-size:10px; margin-bottom:10px;\">\r\n  <tr>\r\n    <td class=\"t\"><strong>Raz\u00f3n Social / Nombres:</strong> {{ doc.customer_name or \"\" }}</td>\r\n    <td class=\"t\"><strong>Fecha Emisi\u00f3n:</strong> {{ frappe.utils.format_datetime(doc.posting_date, \"dd/MM/yyyy\") if doc.posting_date else \"\" }}</td>\r\n  </tr>\r\n  <tr>\r\n    <td class=\"t\"><strong>Identificaci\u00f3n:</strong> {{ doc.customer_tax_id or \"\" }}</td>\r\n    <td class=\"t\"><strong>Direcci\u00f3n:</strong> {{ customer.direccion if customer else \"\" }}</td>\r\n  </tr>\r\n  <tr>\r\n    <td class=\"t\"><strong>Email:</strong> {{ doc.customer_email or \"\" }}</td>\r\n    <td class=\"t\"><strong>Tel\u00e9fono:</strong> {{ customer.telefono if customer else \"\" }}</td>\r\n  </tr>\r\n</table>\r\n\r\n<table style=\"width:100%; border-collapse:collapse; font-size:10px; margin-bottom:10px;\">\r\n  <thead>\r\n    <tr style=\"background:#efefef;\">\r\n      <th class=\"t\">C\u00f3digo</th>\r\n      <th class=\"t center\">Cantidad</th>\r\n      <th class=\"t\">Descripci\u00f3n</th>\r\n      <th class=\"t right\">Precio Unitario</th>\r\n      <th class=\"t right\">Descuento</th>\r\n      <th class=\"t center\">IVA</th>\r\n      <th class=\"t right\">Total</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {% for it in doc.items %}\r\n      {% set qty = (it.qty or 0) | float %}\r\n      {% set rate = (it.rate or 0) | float %}\r\n      {% set tax = (it.tax_rate or 0) | float %}\r\n      {% set base = (qty * rate) | float %}\r\n      {% set iva_line = (base * tax / 100.0) | float %}\r\n\r\n      {% set ns.subtotal = ns.subtotal + base %}\r\n      {% set ns.ivatotal = ns.ivatotal + iva_line %}\r\n\r\n      {% if tax|int == 0 %}{% set ns.base0 = ns.base0 + base %}{% set ns.iva0 = ns.iva0 + iva_line %}\r\n      {% elif tax|int == 5 %}{% set ns.base5 = ns.base5 + base %}{% set ns.iva5 = ns.iva5 + iva_line %}\r\n      {% elif tax|int == 12 %}{% set ns.base12 = ns.base12 + base %}{% set ns.iva12 = ns.iva12 + iva_line %}\r\n      {% elif tax|int == 13 %}{% set ns.base13 = ns.base13 + base %}{% set ns.iva13 = ns.iva13 + iva_line %}\r\n      {% elif tax|int == 14 %}{% set ns.base14 = ns.base14 + base %}{% set ns.iva14 = ns.iva14 + iva_line %}\r\n      {% elif tax|int == 15 %}{% set ns.base15 = ns.base15 + base %}{% set ns.iva15 = ns.iva15 + iva_line %}\r\n      {% endif %}\r\n\r\n      <tr>\r\n        <td class=\"t\">{{ it.item_code }}</td>\r\n        <td class=\"t center\">{{ \"{:g}\".format(qty) }}</td>\r\n        <td class=\"t\">{{ it.item_name or it.item_code }}</td>\r\n        <td class=\"t right\">{{ money(rate) }}</td>\r\n        <td class=\"t right\">0.00</td>\r\n        <td class=\"t center\">{{ tax|int }}%</td>\r\n        <td class=\"t right\">{{ money(base) }}</td>\r\n      </tr>\r\n    {% endfor %}\r\n  </tbody>\r\n</table>\r\n\r\n<div style=\"overflow:hidden;\">\r\n  <div style=\"width:48%; float:left;\">\r\n    {% if doc.payments and doc.payments|length > 0 %}\r\n      <table style=\"width:100%; border-collapse:collapse; font-size:10px;\">\r\n        <thead>\r\n          <tr style=\"background:#efefef;\">\r\n            <th class=\"t\">Forma de Pago</th>\r\n            <th class=\"t right\">Valor</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {% for p in doc.payments %}\r\n            {% set pay_key = p.forma_pago or p.code %}\r\n            {% set monto = p.monto or p.amount %}\r\n            {% set pay_name = frappe.db.get_value(\"formas de pago\", {\"sri_code\": pay_key}, \"nombre\")\r\n                              or frappe.db.get_value(\"formas de pago\", pay_key, \"nombre\")\r\n                              or pay_key %}\r\n            <tr>\r\n              <td class=\"t\">{{ pay_name }}</td>\r\n              <td class=\"t right\">{{ money(monto if monto is not none else doc.grand_total) }}</td>\r\n            </tr>\r\n          {% endfor %}\r\n        </tbody>\r\n      </table>\r\n    {% endif %}\r\n  </div>\r\n\r\n  <div style=\"width:48%; float:right;\">\r\n    <table style=\"width:100%; border-collapse:collapse; font-size:10px;\">\r\n      {% if ns.base15 > 0 %}<tr><td class=\"t\">Subtotal 15%</td><td class=\"t right\">{{ money(ns.base15) }}</td></tr>{% endif %}\r\n      {% if ns.base14 > 0 %}<tr><td class=\"t\">Subtotal 14%</td><td class=\"t right\">{{ money(ns.base14) }}</td></tr>{% endif %}\r\n      {% if ns.base13 > 0 %}<tr><td class=\"t\">Subtotal 13%</td><td class=\"t right\">{{ money(ns.base13) }}</td></tr>{% endif %}\r\n      {% if ns.base12 > 0 %}<tr><td class=\"t\">Subtotal 12%</td><td class=\"t right\">{{ money(ns.base12) }}</td></tr>{% endif %}\r\n      {% if ns.base5 > 0 %}<tr><td class=\"t\">Subtotal 5%</td><td class=\"t right\">{{ money(ns.base5) }}</td></tr>{% endif %}\r\n      {% if ns.base0 > 0 %}<tr><td class=\"t\">Subtotal 0%</td><td class=\"t right\">{{ money(ns.base0) }}</td></tr>{% endif %}\r\n\r\n      <tr><td class=\"t\">Subtotal (sin impuestos)</td><td class=\"t right\">{{ money(doc.total_without_tax if doc.total_without_tax is not none else ns.subtotal) }}</td></tr>\r\n      <tr><td class=\"t\">Descuento</td><td class=\"t right\">0.00</td></tr>\r\n      <tr><td class=\"t\">IVA</td><td class=\"t right\">{{ money(doc.tax_total if doc.tax_total is not none else ns.ivatotal) }}</td></tr>\r\n      <tr><td class=\"t\"><strong>Valor Total</strong></td><td class=\"t right\"><strong>{{ money(doc.grand_total if doc.grand_total is not none else (ns.subtotal + ns.ivatotal)) }}</strong></td></tr>\r\n    </table>\r\n  </div>\r\n</div>\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2026-02-24 00:15:43.481972",
 "modified_by": "Administrator",
 "module": "Restaurante BMARC",
 "name": "Factura",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}